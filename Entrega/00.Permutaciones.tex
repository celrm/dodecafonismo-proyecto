\section{Definiciones matemáticas}\label{ch:permutaciones}

	\subsection{Conjuntos y grupos}
		Un \textbf{conjunto} es una colección de objetos bien definidos y distintos entre sí que se llaman \textbf{elementos}. 
	
		Para definir un conjunto se puede o bien listar los objetos uno a uno, o bien describirlos por medio de un predicado: una o varias propiedades que caracterizan a todos los elementos de dicho conjunto.

		Por ejemplo, el conjunto $K_i$, formado por las doce notas de la escala cromática de una misma octava $i$, está bien definido porque podemos hacer una lista con ellas: por ejemplo, $K_4=$:
		
		$\{\mbox{Do}_4, \mbox{Do\#}_4, \mbox{Re}_4, \mbox{Re\#}_4, \mbox{Mi}_4, \mbox{Fa}_4, \mbox{Fa\#}_4, \mbox{Sol}_4, \mbox{Sol\#}_4, \mbox{La}_4, \mbox{La\#}_4, \mbox{Si}_4\}$
		
		Por un lado, aun llamando a las notas de distinta manera, el conjunto, conceptualmente, es el mismo. Además, el hecho de listar algún elemento más de una vez no afecta a su definición. Como $\mbox{Do\#}_4 = \mbox{Re}\flat_4$ ({ya que trabajamos con temperamento igual}), $K_4$ también puede ser listado así:
		
		$\{\mbox{Do}_4, \mbox{Do\#}_4, \mbox{Re}\flat_4, \mbox{Re}_4, \mbox{Re\#}_4, \mbox{Mi}_4, \mbox{Fa}_4, \mbox{Fa\#}_4, \mbox{Sol}_4, \mbox{Sol\#}_4, \mbox{La}_4, \mbox{La\#}_4, \mbox{Si}_4\}$
	
		En cambio, el conjunto $D$, formado por las duraciones rítmicas elementales -- sin ligaduras ni puntillos --, es infinito, por lo que no se puede listar de forma completa. Sin embargo, se puede expresar por medio de un predicado:		
		\[D =\{2^n:n\in\mathbb{Z},\ n\le 2\} = \{4,\ 2,\ 1,\ \dfrac{1}{2},\ \dfrac{1}{4},\ \dfrac{1}{8},\ \ldots\} = \{\Ganz,\ \Halb,\ \Vier,\ \textsf{\Acht},\ \ldots\}\]
		
		La notación $n\in\mathbb{Z}$ significa que $n$ pertenece a los números enteros. En este caso se han representado las duraciones mediante su ratio con la duración de la negra.
	
		Los elementos de un conjunto pueden combinarse mediante \textbf{operaciones} \textemdash como la suma o la multiplicación en el caso de los números\textemdash~para dar otros objetos matemáticos. 
		
		Se dice que un conjunto $G$ no vací­o y una operación binaria ($\ast$) forman la estructura de un \textbf{grupo} $(G, \ast)$ cuando cumplen las siguientes condiciones:
	
		\begin{enumerate}
			\item Su operación es interna: Si $a,b\in G$, entonces $a\ast b\in G$.		
			\item Su operación es asociativa: Si $a,b,c\in G$, entonces $(a\ast b)\ast c=a\ast(b\ast c)$.
			\item Existe un elemento $e$ en $G$, llamado \textbf{elemento neutro} o \textbf{identidad}, tal que para todo $x\in G$ se cumple que $e\ast x = x\ast e = x$. Se puede probar que el neutro es único para cada grupo. A veces se incluye dentro de la definición del grupo: $(G, \ast, e)$.
			\item Cada $x\in G$ tiene asociado otro elemento $x^{-1}\in G$, llamado \textbf{elemento inverso}, tal que $x \ast x^{-1} = x^{-1}  \ast x = e$. Se puede probar que el inverso de cada elemento es único.
		\end{enumerate}
	
	$(\mathbb{Z},+,0)$ y $(\mathbb{Q},+,0)$ son grupos, pero $(\mathbb{N},+,0)$ no porque no existe el \textbf{inverso} de 2 con la suma: $-2\notin\mathbb{N}$. En cambio, $(\mathbb{R},*,1)$ y $(\mathbb{Q},*,1)$ son grupos, pero $(\mathbb{Z},*,1)$ no porque no existe el \textbf{inverso} de 2 con la multiplicación: $\dfrac12\notin\mathbb{Z}$.
	
	\subsection{Funciones y permutaciones}
		Una \textbf{función} es una regla que asocia a cada elemento de un primer conjunto, llamado \textbf{dominio}, un único elemento de un segundo conjunto. Si la función se llama $f$, el dominio $A$ y el segundo conjunto $B$, se denota $f:A\to B$. El elemento asociado a un $x$ mediante $f$ se denota $f(x)$.
		
		Todos los $x\in A$ tienen que estar asociados a un $f(x)\in B$, pero no todos los elementos de $B$ tienen un elemento de $A$ asociado. Los elementos de $B$ que sí lo cumplen, es decir, los que se pueden escribir como $f(x)$ para algún $x$, forman el conjunto \textbf{imagen} de la función: $im(f)=\{\ y\in B :\, \exists\, x \in A,\ f(x)=y\ \}$. 
		
		Una función \textbf{biyectiva} es aquella que empareja de manera exacta los elementos de dos conjuntos, de tal forma que cada elemento del dominio está emparejado con exactamente un elemento de la imagen, y cada elemento de la imagen se empareja con exactamente un elemento del dominio.
		
		Cuando varias funciones se aplican una detrás de la otra decimos que realizamos la operación de \textbf{composición de funciones}. Se representa con el símbolo $\circ$. La imagen de la primera función será el dominio de la segunda, y así sucesivamente. Por ejemplo, aplicar una función $f(x)$ y después aplicar una función $g(x)$ se denota $g(f(x))=(g\circ f)(x)$.
		
		Una \textbf{permutación} $\sigma(X)$ es una función sobre un conjunto $X$ que asocia sus elementos a los elementos del mismo conjunto $X$ de manera unívoca. Es decir, asocia cada elemento a uno, y solo uno, de los elementos de su mismo conjunto. 

		El conjunto de todas las posibles permutaciones sobre un determinado conjunto $X$, junto con la operación de composición de funciones $(\circ)$, forma un grupo denotado por $S_X$. Para probarlo, se debe comprobar que cumple todas las propiedades de los grupos.

		\begin{enumerate}
			\item Permutar dos veces es también una permutación.
			\item La composición de funciones es asociativa.
			\item La permutación que asigna un elemento a sí mismo es la función identidad.
			\item Como las permutaciones son biyectivas, cada una tiene una inversa que es también una permutación.		
		\end{enumerate}

		Cuando $X$ es el conjunto de números naturales desde 1 hasta $n$, el grupo $S_X$ se representa como $S_n$ y se le denomina el grupo simétrico de orden $n$. El número de elementos en $S_n$, es decir, de posibles permutaciones de $n$ números es $n!$. 
		
		En los ejemplos musicales de este texto, los conjuntos estarán numerados desde 0 hasta $n-1$, siendo $n$ el número de elementos a permutar, en vez de desde 1 hasta $n$. Seguirán siendo grupos simétricos de orden $n$, pero con una numeración distinta.
		
		La notación utilizada para representar una permutación $\sigma$ perteneciente a $S_n$ con la numeración desde 0 y con $\sigma(m)$ siendo el elemento asociado a $m$ mediante $\sigma$, es:
		
		\[\sigma=\left(
		\begin{matrix}
		0&1&2&&n-3&n-2&n-1\\
		\sigma\left(0\right)&\sigma\left(1\right)&\sigma\left(2\right)&\cdots
		&\sigma\left(n-3\right)&\sigma\left(n-2\right)&\sigma\left(n-1\right)\\
		\end{matrix}\right)\]
		
	\subsection{Aritmética modular}
		Fijado un $n\in\mathbb{N}$, se dice que $a$ y $b$ son \textbf{congruentes} (o equivalentes) módulo $n$ si tienen el mismo resto al dividirlos entre $n$; es decir, que todos los números con el mismo resto se agrupan y se toman como equivalentes. Se expresa como $a\equiv b$ (mod. $n$).
	
		De esta forma se pueden operar entre sí los números del 0 al $n-1$, ya que se conservan las operaciones de los números enteros, y si un resultado es $\geq n$ se puede seguir dividiendo entre $n$ para que cumpla $0\leq r<n$.
		
		Se conserva la suma (y la resta), ya que si $a=nq_a+r_a$ y $b=nq_b+r_b$, entonces $a+b=(nq_a+r_a)+(nq_b+r_b)=n(q_a+q_b)+(r_a+r_b)$, así que el resto de $a+b$ es igual al de $r_a+r_b$.
		
		La aritmética modular también se llama aritmética del reloj porque funciona de la misma manera que las horas en un reloj. Como el 3 tiene el mismo resto entre 12 que el 15, las 15h son las 3h: $3\equiv15$ (mod. $12$). O, por ejemplo, 2 horas después de las 11 dan las 13, es decir, la 1: $2+11=13\equiv1$ (mod. $12$). 
		
		También se conserva la multiplicación: si $a=nq_a+r_a$ y $b=nq_b+r_b$, entonces $ab=(nq_a+r_a)(nq_b+r_b)=n^2q_aq_b+nq_ar_b+nq_br_a+r_ar_b=n(nq_aq_b+q_ar_b+q_br_a)+r_ar_b$, así que el resto de $ab$ es igual al de $r_ar_b$.
		
		En música, la aritmética modular se puede encontrar en las escalas: todas las notas Do se toman como equivalentes, por ejemplo, y al sumarle 12 semitonos (una octava) se vuelve a obtener un Do. Si se asocian los números del 0 al 11 a las notas cromáticas del Do al Si, entonces $0+12=12\equiv0$ (mod. $12$). Entonces se dice que un número $k$ pertenece al conjunto \{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11\}, con las propiedades indicadas, de esta manera: $k\in\mathbb{Z}_{12}$.